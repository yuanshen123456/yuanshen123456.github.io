import{r as I,o as Q,n as D,a as X,w as Y,b as Z,c as ee,u as te,d as i,e as O,f as y,g as oe,t as x,h as E,i as b,j as ne,k as se,l as ae,m as R,p as le,B as T,q as ce,s as re,v as ie,x as ue,y as de,z as fe,A as me,C as K,D as he,E as ge,P as Be,F as j,G as pe,H as ve,I as we,J as be,K as Ce,L as A,M as _e,N as ye,O as f,Q as Se,R as ke,S as N,T as xe,U as H,V as Te,W as Pe,X as Ie,_ as Oe}from"./index-CBcIl9Zc.js";import{m as Ee,u as $e,s as k}from"./function-call-D9_7l4UI.js";const De=(e,o)=>{const t=I(),n=()=>{t.value=te(e).height};return Q(()=>{if(D(n),o)for(let l=1;l<=3;l++)setTimeout(n,100*l)}),X(()=>D(n)),Y([Z,ee],n),t};function Re(e,o){const t=De(e,!0);return n=>i("div",{class:o("placeholder"),style:{height:t.value?`${t.value}px`:void 0}},[n()])}const[V,F]=O("action-bar"),J=Symbol(V),je={placeholder:Boolean,safeAreaInsetBottom:x};var Ae=y({name:V,props:je,setup(e,{slots:o}){const t=I(),n=Re(t,F),{linkChildren:l}=oe(J);l();const u=()=>{var m;return i("div",{ref:t,class:[F(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(m=o.default)==null?void 0:m.call(o)])};return()=>e.placeholder?n(u):u()}});const Ne=E(Ae),[He,Fe]=O("action-bar-button"),qe=b({},ne,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var Ue=y({name:He,props:qe,setup(e,{slots:o}){const t=se(),{parent:n,index:l}=ae(J),u=R(()=>{if(n){const c=n.children[l.value-1];return!(c&&"isButton"in c)}}),m=R(()=>{if(n){const c=n.children[l.value+1];return!(c&&"isButton"in c)}});return le({isButton:!0}),()=>{const{type:c,icon:r,text:h,color:s,loading:g,disabled:w}=e;return i(T,{class:Fe([c,{last:m.value,first:u.value}]),size:"large",type:c,icon:r,color:s,loading:g,disabled:w,onClick:t},{default:()=>[o.default?o.default():h]})}}});const q=E(Ue),[Ke,B,_]=O("dialog"),Ve=b({},ce,{title:String,theme:String,width:re,message:[String,Function],callback:Function,allowHtml:Boolean,className:ie,transition:ue("van-dialog-bounce"),messageAlign:String,closeOnPopstate:x,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:x,closeOnClickOverlay:Boolean}),Je=[...de,"transition","closeOnPopstate"];var L=y({name:Ke,props:Ve,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:o,slots:t}){const n=I(),l=fe({confirm:!1,cancel:!1}),u=a=>o("update:show",a),m=a=>{var d;u(!1),(d=e.callback)==null||d.call(e,a)},c=a=>()=>{e.show&&(o(a),e.beforeClose?(l[a]=!0,be(e.beforeClose,{args:[a],done(){m(a),l[a]=!1},canceled(){l[a]=!1}})):m(a))},r=c("cancel"),h=c("confirm"),s=me(a=>{var d,p;if(a.target!==((p=(d=n.value)==null?void 0:d.popupRef)==null?void 0:p.value))return;({Enter:e.showConfirmButton?h:j,Escape:e.showCancelButton?r:j})[a.key](),o("keydown",a)},["enter","esc"]),g=()=>{const a=t.title?t.title():e.title;if(a)return i("div",{class:B("header",{isolated:!e.message&&!t.default})},[a])},w=a=>{const{message:d,allowHtml:p,messageAlign:v}=e,C=B("message",{"has-title":a,[v]:v}),S=pe(d)?d():d;return p&&typeof S=="string"?i("div",{class:C,innerHTML:S},null):i("div",{class:C},[S])},z=()=>{if(t.default)return i("div",{class:B("content")},[t.default()]);const{title:a,message:d,allowHtml:p}=e;if(d){const v=!!(a||t.title);return i("div",{key:p?1:0,class:B("content",{isolated:!v})},[w(v)])}},M=()=>i("div",{class:[we,B("footer")]},[e.showCancelButton&&i(T,{size:"large",text:e.cancelButtonText||_("cancel"),class:B("cancel"),style:{color:e.cancelButtonColor},loading:l.cancel,disabled:e.cancelButtonDisabled,onClick:r},null),e.showConfirmButton&&i(T,{size:"large",text:e.confirmButtonText||_("confirm"),class:[B("confirm"),{[ve]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:l.confirm,disabled:e.confirmButtonDisabled,onClick:h},null)]),G=()=>i(Ne,{class:B("footer")},{default:()=>[e.showCancelButton&&i(q,{type:"warning",text:e.cancelButtonText||_("cancel"),class:B("cancel"),color:e.cancelButtonColor,loading:l.cancel,disabled:e.cancelButtonDisabled,onClick:r},null),e.showConfirmButton&&i(q,{type:"danger",text:e.confirmButtonText||_("confirm"),class:B("confirm"),color:e.confirmButtonColor,loading:l.confirm,disabled:e.confirmButtonDisabled,onClick:h},null)]}),W=()=>t.footer?t.footer():e.theme==="round-button"?G():M();return()=>{const{width:a,title:d,theme:p,message:v,className:C}=e;return i(Be,K({ref:n,role:"dialog",class:[B([p]),C],style:{width:ge(a)},tabindex:0,"aria-labelledby":d||v,onKeydown:s,"onUpdate:show":u},he(e,Je)),{default:()=>[g(),z(),W()]})}}});let P;const Le={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let ze=b({},Le);function Me(){({instance:P}=Ee({setup(){const{state:o,toggle:t}=$e();return()=>i(L,K(o,{"onUpdate:show":t}),null)}}))}function Ge(e){return Ce?new Promise((o,t)=>{P||Me(),P.open(b({},ze,e,{callback:n=>{(n==="confirm"?o:t)(n)}}))}):Promise.resolve(void 0)}const We=e=>Ge(b({showCancelButton:!0},e));E(L);const Qe="https://api.movecoding.cn";async function U(e,o,t,n={},l=!1,u="application/json",m={}){o=Qe+o;const c={...m};let r={method:"GET",headers:{"Content-Type":"application/json"}},h=o;if(e==="GET"){if(n){const s=Object.entries(n).map(([g,w])=>`${encodeURIComponent(g)}=${encodeURIComponent(w)}`).join("&");h=`${o}?${s}`}r={method:e,...c}}else e==="POST"&&(r={method:e,headers:{"Content-Type":u,...c.headers},body:u==="application/json"?JSON.stringify(t):t,...c});if(l){if(!r||typeof r!="object")throw new Error("Invalid request object");r.headers||(r.headers={});const s=[["Content-Type","application/json"],["Authorization","Bearer "+localStorage.getItem("token")]];r.headers=s}try{const s=await fetch(h,r);if(console.log("response",s),!s.ok){s.status===404&&k("服务器连接失败!"),s.status===500&&k("服务器内部错误!");const g=await s.json();throw k(g),new Error(`请求失败: ${s.status} ${s.statusText}. 错误详情: ${g}`)}if(s.ok){const g=u==="application/json"?await s.json():await s.text();return g.status==-1&&We({title:"提示",message:"登录失效",confirmButtonText:"重新登录",cancelButtonText:"退出"}).then(()=>{localStorage.clear(),A.replace("/")}).catch(()=>{A.replace("/")}),g}return s}catch(s){throw console.error("请求发生错误:",s),s}}const Xe={post(e,o,t=!1){return U("POST",e,o,{},t)},get(e,o,t=!1){return U("GET",e,"",o,t)}},Ye=e=>Xe.post("/api/logout",e,!0),Ze="/assets/head-BJcNVnE9.png",$=e=>(Pe("data-v-527b8843"),e=e(),Ie(),e),et={class:"header"},tt={class:"name"},ot=["src"],nt={class:"card_box"},st=$(()=>f("div",{class:"title"},"工具",-1)),at={class:"item-box"},lt=$(()=>f("div",{class:"name"},"解密",-1)),ct=$(()=>f("div",{class:"name"},"二维码",-1)),rt=y({__name:"HomeView",setup(e){const o=H(),{push:t,replace:n}=H(),l=localStorage.getItem("userId"),u=c=>{switch(c){case"jiemiJson":t("/jiemiJson");break;case"qrcode":window.open(o.resolve("/qrcode").href,"_blank");break}},m=()=>{Ye({userId:l}).then(c=>{console.log("res",c),c.status==200&&(localStorage.removeItem("token"),localStorage.removeItem("userId"),n("/"))})};return(c,r)=>{const h=Te("van-icon");return _e(),ye(xe,null,[f("div",et,[f("div",tt,[Se(ke(N(l))+" ",1),f("img",{class:"img",src:N(Ze),alt:""},null,8,ot),f("ul",{class:"op_box"},[f("li",{class:"op_item",onClick:m},"退出登录")])])]),f("main",null,[f("div",nt,[st,f("div",at,[f("div",{class:"item",onClick:r[0]||(r[0]=s=>u("jiemiJson"))},[i(h,{name:"gift"}),lt]),f("div",{class:"item",onClick:r[1]||(r[1]=s=>u("qrcode"))},[i(h,{name:"qr"}),ct])])])])],64)}}}),dt=Oe(rt,[["__scopeId","data-v-527b8843"]]);export{dt as default};
